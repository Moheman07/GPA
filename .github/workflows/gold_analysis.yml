- name: Fix and Run Analysis
  run: |
    # تطبيق الإصلاحات مباشرة
    sed -i 's/progress=False)/progress=False, auto_adjust=True)/g' main_analyzer_v3.py
    
    # إضافة معالجة الأخطاء
    python -c "
import re
with open('main_analyzer_v3.py', 'r') as f:
    content = f.read()
    
# إصلاح analyze_timeframe
content = re.sub(
    r'latest```math
\'RSI\'```',
    'latest.get(\'RSI\', 50)',
    content
)

with open('main_analyzer_v3.py', 'w') as f:
    f.write(content)
    "
    
    # تشغيل السكربت
    python main_analyzer_v3.py
